(function(window){var document=window.document;if(!String.prototype.trimEnd){String.prototype.trimEnd=function(c){if(c){return this.replace(new RegExp(c.escapeRegExp()+"*$"),"");}return this.replace(/\s+$/,"");};}if(!String.prototype.trimStart){String.prototype.trimStart=function(c){if(c){return this.replace(new RegExp("^"+c.escapeRegExp()+"*"),"");}return this.replace(/^\s+/,"");};}if(!String.prototype.escapeRegExp){String.prototype.escapeRegExp=function(){return this.replace(/[.*+?^${}()|[\]\/\\]/g,"\\$0");};}function Tanchor(url){var isViewSource,a;isViewSource=/^view-source/.test(url);if(isViewSource){url=url.replace(/^view-source:/,"");}a=document.createElement("a");a.href=url;this.protocol=a.protocol;this.host=a.host;this.pathname=a.pathname;this.search=a.search;this.hash=a.hash;this.viewsource=isViewSource;a=null;return this;}Tanchor.prototype=(function(){function toString(){var search,hash,str;search=((this.search&&!/^\?/.test(this.search))?"?":"")+this.search;hash=((this.hash&&!/^\#/.test(this.hash))?"#":"")+this.hash;str=this.protocol+"//"+this.host+this.pathname+search+hash;if(this.viewsource){str="view-source:"+str;}return str;}function getUrlValueGetter(type){var char0=(type==="search")?"?":"#";return function(key){var re,test,result;re=new RegExp("["+char0+"|&]"+key+"(=.*?)?&");test=re.test(this[type]+"&");if(test){if(RegExp.$1!==""){result=RegExp.$1.trimStart("=");}else{result="";}}else{result=null;}if(result){result=decodeURIComponent(result.replace("+"," "));}return result;};}function getUrlValueSetter(type){var char0=(type==="search")?"?":"#";return function(key,value,doRemoveBlank){var q,re;value=typeof value==="undefined"?"":value;q=this[type]+"&";re=new RegExp("["+char0+"|&]"+key+"(=.*?)?&");if(doRemoveBlank&&value===""){q=q.replace(re,"");}if(!re.test(q)){q=q+key+"="+encodeURIComponent(value);}else{q=q.replace(re,"&"+key+"="+encodeURIComponent(value)+"&");}this[type]=char0+q.trimStart("&").trimEnd("&");};}return{toString:toString,getSearchVal:getUrlValueGetter("search"),getHashVal:getUrlValueGetter("hash"),setSearchVal:getUrlValueSetter("search"),setHashVal:getUrlValueSetter("hash")};})();window.Tanchor=Tanchor;})(window);